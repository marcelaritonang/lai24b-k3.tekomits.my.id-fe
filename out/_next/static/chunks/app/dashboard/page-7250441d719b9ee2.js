(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6754:(e,t,a)=>{Promise.resolve().then(a.bind(a,1789))},1789:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(7437),r=a(2265),l=a(101),i=a(6250);let n="http://localhost:8080";function o(){let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[x,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[g,u]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=localStorage.getItem("token");e?y(e):window.location.href="/login"},[]);let y=async e=>{d(!0),h("");try{let s=await fetch("".concat(n,"/v1/api/urls?page=1&per_page=10"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!s.ok){let e=await s.json();h(e.message||"Failed to fetch URLs");return}let r=await s.json();if(console.log("Fetched Data:",r),r.data&&Array.isArray(r.data)){var a;let e=r.data.map(e=>e.url);t(e),u((null===(a=r.meta)||void 0===a?void 0:a.total)||0)}else t([])}catch(e){h("Network error. Please try again.")}finally{d(!1)}},f=async e=>{e.preventDefault(),d(!0),h(""),p("");try{let e=localStorage.getItem("token");if(!e){window.location.href="/login";return}let s=await fetch("".concat(n,"/v1/api/urls"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({long_url:a})});if(!s.ok){let e=await s.json();h(e.message||"Failed to create short URL");return}let r=await s.json();t(e=>[r.data,...e]),o(""),p("Short URL created successfully!"),u(e=>e+1)}catch(e){h("Network error. Please try again.")}finally{d(!1)}},b=async e=>{if(!e){h("Invalid ID for deletion.");return}d(!0),h(""),p("");try{let a=localStorage.getItem("token"),s=await fetch("".concat(n,"/v1/api/urls/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}});if(!s.ok){let e=await s.json();h(e.message||"Failed to delete URL");return}t(t=>t.filter(t=>t.id!==e)),u(e=>e-1),p("URL deleted successfully!")}catch(e){h("Network error. Please try again.")}finally{d(!1)}};return(0,s.jsx)(i.Z,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-white",children:[(0,s.jsx)(l.Z,{showSidebarToggle:!0}),(0,s.jsx)("main",{className:"pt-20 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Dashboard"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Welcome back, Rianco!"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"p-6 bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Create New Link"}),(0,s.jsxs)("form",{onSubmit:f,className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"Paste your URL here...",className:"flex-1 px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:c}),(0,s.jsx)("button",{type:"submit",className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",disabled:c,children:c?"Shortening...":"Shorten"})]}),x&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-500",children:x}),m&&(0,s.jsx)("p",{className:"mt-2 text-sm text-green-500",children:m})]}),(0,s.jsxs)("div",{className:"p-6 bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Statistics"}),(0,s.jsxs)("p",{className:"mb-4",children:["Total Links: ",(0,s.jsx)("span",{className:"font-bold",children:g})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-8",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Links"})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Original URL"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Short Link"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clicks"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===e.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,className:"text-center py-4 text-gray-500",children:"No short URLs found. Create one above!"})}):e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 truncate max-w-xs",children:e.long_url}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("a",{href:e.short_url,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-900 text-sm",children:e.short_url})}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.clicks||0}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("button",{onClick:()=>b(e.id),className:"text-red-600 hover:text-red-800 text-sm",disabled:c,children:"Delete"})})]},e.id))})]})})]})]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[187,250,130,215,744],()=>t(6754)),_N_E=e.O()}]);